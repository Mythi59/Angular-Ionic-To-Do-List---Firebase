<ion-content [fullscreen]="true" class="main-content">
  <!-- Header personalizado -->
  <div class="custom-header">
    <div class="header-top">
      <ion-button fill="clear" class="menu-btn">
        <ion-icon name="menu-outline"></ion-icon>
      </ion-button>
      <div class="date-section">
        <h1>{{day}} {{month}}</h1>
      </div>
      <div class="date-section">
        <ion-button fill="clear" class="settings-btn" (click)="debugTasks()">
          <ion-icon name="bug-outline"></ion-icon>
        </ion-button>
      </div>
    </div>

    <div class="today-section">
      <h2>Hoy</h2>
      <ion-button class="add-new-btn" (click)="navigateToCreateTask()">
        Añadir Tarea
      </ion-button>
    </div>
    <p>{{countTask}} Tareas</p>
  </div>

  <!-- Sección de horas y tareas -->
  <div class="tasks-section">
    <div class="hours-counter">
      <div class="hour-badge">
        <span class="hour-number">{{day}}</span>
      </div>
      <div class="hours-info">
        <span class="hours-text">8 hours a day</span>
      </div>
      <div class="day-number">{{nextDay}}</div>
    </div>

    <!-- Lista de tareas por hora -->
    <div class="timeline">
      <!-- Tareas del día -->
      <div
        class="task-item"
        *ngFor="let task of todayTasks; trackBy: trackByTaskId"
        [class.completed]="task.completed"
      >
        <div class="time-label">{{ formatTime(task.time) }}</div>
        <div class="task-content" [class.highlighted]="!task.completed">
          <ion-checkbox
            [checked]="task.completed"
            (ionChange)="toggleTaskComplete(task)"
          >
          </ion-checkbox>
          <div class="task-text">
            <h3 [class.strike-through]="task.completed">{{ task.title }}</h3>
            <p *ngIf="task.description">{{ task.description }}</p>
            <small class="category-badge">{{ task.category }}</small>
          </div>
        </div>
      </div>

      <!-- Mensaje cuando no hay tareas -->
      <div class="task-item no-tasks" *ngIf="todayTasks.length === 0">
        <div class="time-label">--:--</div>
        <div class="task-content">
          <ion-icon name="add-circle-outline" color="primary"></ion-icon>
          <div class="task-text">
            <h3>No hay tareas para hoy</h3>
            <p>¡Añade tu primera tarea!</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>
